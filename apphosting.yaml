# Settings for Cloud Run
runConfig:
  minInstances: 1
  maxInstances: 5
  concurrency: 40
  cpu: 1.5
  memoryMiB: 1024

# Environment variables and secrets
env:
  # Build-time environment variables
  - variable: NEXT_PUBLIC_BASE_PATH
    value: ""
    availability:
      - BUILD

  - variable: NEXT_PUBLIC_GHOST_URL
    value: "https://ghost.joy.so"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_GHOST_CONTENT_API_KEY
    secret: GHOST_CONTENT_API_KEY
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_STRAPI_URL
    value: "https://strapi.joy.so"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_STRAPI_API_KEY
    secret: STRAPI_API_KEY
    availability:
      - BUILD
      - RUNTIME

  # Runtime-only environment variables
  - variable: GHOST_URL
    secret: ghost_url_secret
    availability:
      - RUNTIME

  - variable: GHOST_KEY
    secret: ghost_key_secret
    availability:
      - RUNTIME
